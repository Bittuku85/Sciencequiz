<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tournament App - Free Fire Champions</title>
    <link href="https://fonts.googleapis.com/css2?family=Russo+One:wght@400&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://unpkg.com/qrcode-generator/qrcode.js"></script>
    <style>
        :root {
            --bg-primary: #F8FAFC;
            --bg-secondary: #E2E8F0;
            --text-dark: #1E293B;
            --accent-blue: #2563EB;
            --accent-gold: #FBBF24;
            --accent-red: #DC2626;
            --border: #CBD5E1;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Russo One', sans-serif;
            background: var(--bg-primary);
            color: var(--text-dark);
            overflow-x: hidden;
        }

        .container {
            max-width: 100%;
            padding: 0 16px;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, var(--accent-blue), #1D4ED8);
            color: white;
            padding: 16px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 24px;
            font-weight: bold;
        }

        .wallet-balance {
            background: rgba(255,255,255,0.2);
            padding: 8px 16px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Navigation */
        .nav-tabs {
            display: flex;
            background: white;
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 72px;
            z-index: 999;
        }

        .nav-tab {
            flex: 1;
            padding: 16px;
            text-align: center;
            background: none;
            border: none;
            cursor: pointer;
            font-family: inherit;
            font-weight: bold;
            color: var(--text-dark);
            transition: all 0.3s ease;
        }

        .nav-tab.active {
            color: var(--accent-blue);
            border-bottom: 3px solid var(--accent-blue);
        }

        /* Content Sections */
        .content-section {
            display: none;
            padding: 20px 0;
            min-height: calc(100vh - 160px);
        }

        .content-section.active {
            display: block;
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, var(--accent-blue), #1D4ED8);
            color: white;
            padding: 40px 20px;
            text-align: center;
            margin: -20px -16px 20px -16px;
        }

        .hero h1 {
            font-size: 32px;
            margin-bottom: 16px;
        }

        .hero p {
            font-size: 18px;
            margin-bottom: 24px;
            opacity: 0.9;
        }

        .cta-button {
            background: var(--accent-gold);
            color: var(--text-dark);
            padding: 16px 32px;
            border: none;
            border-radius: 25px;
            font-family: inherit;
            font-weight: bold;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .cta-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(251, 191, 36, 0.4);
        }

        /* Tournament Cards */
        .tournaments-grid {
            display: grid;
            gap: 16px;
            margin-top: 20px;
        }

        .tournament-card {
            background: white;
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border: 1px solid var(--border);
            transition: all 0.3s ease;
        }

        .tournament-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
        }

        .tournament-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 16px;
        }

        .tournament-title {
            font-size: 20px;
            color: var(--text-dark);
            margin-bottom: 8px;
        }

        .tournament-time {
            color: var(--accent-blue);
            font-size: 14px;
        }

        .tournament-prize {
            background: var(--accent-gold);
            color: var(--text-dark);
            padding: 8px 12px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 14px;
        }

        .tournament-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-bottom: 16px;
        }

        .detail-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }

        .join-button {
            width: 100%;
            background: var(--accent-blue);
            color: white;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-family: inherit;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .join-button:hover {
            background: #1D4ED8;
        }

        .join-button:disabled {
            background: var(--bg-secondary);
            color: var(--text-dark);
            cursor: not-allowed;
        }

        /* Referral Section */
        .referral-card {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            text-align: center;
        }

        .referral-code {
            background: var(--bg-secondary);
            padding: 16px;
            border-radius: 8px;
            font-size: 24px;
            font-weight: bold;
            margin: 16px 0;
            letter-spacing: 2px;
        }

        .share-buttons {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-top: 20px;
        }

        .share-button {
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-family: inherit;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .whatsapp-btn {
            background: #25D366;
            color: white;
        }

        .telegram-btn {
            background: #0088CC;
            color: white;
        }

        .copy-btn {
            background: var(--accent-blue);
            color: white;
        }

        /* Profile Section */
        .profile-card {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .profile-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 20px;
        }

        .profile-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: var(--accent-blue);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 32px;
        }

        .profile-info h3 {
            font-size: 20px;
            margin-bottom: 4px;
        }

        .profile-info p {
            color: #64748B;
            font-size: 14px;
        }

        .wallet-section {
            background: var(--bg-secondary);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .wallet-balance-large {
            font-size: 32px;
            color: var(--accent-blue);
            margin-bottom: 8px;
        }

        .topup-button {
            background: var(--accent-gold);
            color: var(--text-dark);
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-family: inherit;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 10000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 16px;
            padding: 24px;
            max-width: 400px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--text-dark);
        }

        .form-group {
            margin-bottom: 16px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
        }

        .form-group input {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-family: inherit;
        }

        .payment-section {
            text-align: center;
            margin-top: 20px;
        }

        .upi-info {
            background: var(--bg-secondary);
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 16px;
        }

        .upi-id {
            font-size: 18px;
            font-weight: bold;
            color: var(--accent-blue);
            margin-bottom: 8px;
        }

        #qrcode {
            margin: 16px 0;
        }

        .amount-display {
            font-size: 24px;
            font-weight: bold;
            color: var(--accent-gold);
            margin: 16px 0;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .tournament-card {
            animation: fadeIn 0.6s ease forwards;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 28px;
            }
            
            .tournament-details {
                grid-template-columns: 1fr;
                gap: 8px;
            }
            
            .share-buttons {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">🏆 FF Champions</div>
                <div class="wallet-balance">
                    <i class="fas fa-wallet"></i>
                    <span id="walletAmount">₹0</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="nav-tabs">
        <button class="nav-tab active" onclick="showSection('home')">
            <i class="fas fa-home"></i> Home
        </button>
        <button class="nav-tab" onclick="showSection('tournaments')">
            <i class="fas fa-trophy"></i> Tournaments
        </button>
        <button class="nav-tab" onclick="showSection('referral')">
            <i class="fas fa-share"></i> Refer
        </button>
        <button class="nav-tab" onclick="showSection('profile')">
            <i class="fas fa-user"></i> Profile
        </button>
    </nav>

    <div class="container">
        <!-- Home Section -->
        <section id="home" class="content-section active">
            <div class="hero">
                <h1>Free Fire Tournaments</h1>
                <p>Join epic battles and win amazing prizes!</p>
                <button class="cta-button" onclick="showSection('tournaments')">
                    Play Now <i class="fas fa-gamepad"></i>
                </button>
            </div>

            <div class="tournaments-grid" id="liveTournaments">
                <!-- Live tournaments will be loaded here -->
            </div>
        </section>

        <!-- Tournaments Section -->
        <section id="tournaments" class="content-section">
            <div style="display: flex; gap: 8px; margin-bottom: 20px; overflow-x: auto;">
                <button class="nav-tab active" onclick="filterTournaments('live')">Live</button>
                <button class="nav-tab" onclick="filterTournaments('upcoming')">Upcoming</button>
                <button class="nav-tab" onclick="filterTournaments('past')">Past</button>
            </div>
            
            <div class="tournaments-grid" id="allTournaments">
                <!-- All tournaments will be loaded here -->
            </div>
        </section>

        <!-- Referral Section -->
        <section id="referral" class="content-section">
            <div class="referral-card">
                <h2><i class="fas fa-gift"></i> Refer & Earn</h2>
                <p>Share your referral code and earn ₹10 for each friend who joins!</p>
                
                <div class="referral-code" id="referralCode">LOADING...</div>
                
                <div class="share-buttons">
                    <button class="share-button whatsapp-btn" onclick="shareReferral('whatsapp')">
                        <i class="fab fa-whatsapp"></i> WhatsApp
                    </button>
                    <button class="share-button telegram-btn" onclick="shareReferral('telegram')">
                        <i class="fab fa-telegram"></i> Telegram
                    </button>
                    <button class="share-button copy-btn" onclick="shareReferral('copy')">
                        <i class="fas fa-copy"></i> Copy Link
                    </button>
                </div>

                <div style="margin-top: 20px; padding: 16px; background: var(--bg-secondary); border-radius: 8px;">
                    <h4>Your Earnings</h4>
                    <div style="font-size: 24px; color: var(--accent-gold); margin-top: 8px;">
                        ₹<span id="referralEarnings">0</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Profile Section -->
        <section id="profile" class="content-section">
            <div class="profile-card">
                <div class="profile-header">
                    <div class="profile-avatar" id="profileAvatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="profile-info">
                        <h3 id="playerName">Guest Player</h3>
                        <p>FF UID: <span id="playerUID">Not Set</span></p>
                    </div>
                </div>

                <div class="wallet-section">
                    <h4>Wallet Balance</h4>
                    <div class="wallet-balance-large">₹<span id="walletBalance">0</span></div>
                    <button class="topup-button" onclick="openTopupModal()">
                        <i class="fas fa-plus"></i> Top Up
                    </button>
                </div>

                <div style="margin-top: 20px;">
                    <h4>My Registrations</h4>
                    <div id="myRegistrations" style="margin-top: 12px;">
                        <!-- User registrations will be loaded here -->
                    </div>
                </div>

                <div style="margin-top: 20px;">
                    <button class="join-button" onclick="showLoginModal()">
                        <i class="fas fa-sign-in-alt"></i> Login / Register
                    </button>
                </div>
            </div>
        </section>
    </div>

    <!-- Registration Modal -->
    <div id="registrationModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Join Tournament</h3>
                <button class="close-modal" onclick="closeModal('registrationModal')">&times;</button>
            </div>
            
            <div id="registrationForm">
                <div class="form-group">
                    <label>Player Name</label>
                    <input type="text" id="regPlayerName" placeholder="Enter your name">
                </div>
                <div class="form-group">
                    <label>Free Fire UID</label>
                    <input type="text" id="regPlayerUID" placeholder="Enter your FF UID">
                </div>
                <div class="form-group">
                    <label>Phone Number</label>
                    <input type="tel" id="regPlayerPhone" placeholder="Enter your phone number">
                </div>
                
                <div class="payment-section">
                    <h4>Payment Details</h4>
                    <div class="amount-display">Entry Fee: ₹<span id="entryFeeAmount">50</span></div>
                    
                    <div class="upi-info">
                        <div class="upi-id">UPI ID: Bittukr@fam</div>
                        <p>Scan QR code or pay using UPI ID</p>
                        <div id="qrcode"></div>
                    </div>
                    
                    <div class="form-group">
                        <label>Transaction ID (After Payment)</label>
                        <input type="text" id="transactionId" placeholder="Enter UPI transaction ID">
                    </div>
                </div>
                
                <button class="join-button" onclick="confirmRegistration()">
                    Confirm Registration
                </button>
            </div>
        </div>
    </div>

    <!-- Top-up Modal -->
    <div id="topupModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Money to Wallet</h3>
                <button class="close-modal" onclick="closeModal('topupModal')">&times;</button>
            </div>
            
            <div class="form-group">
                <label>Amount to Add</label>
                <input type="number" id="topupAmount" placeholder="Enter amount" min="10">
            </div>
            
            <div class="payment-section">
                <div class="upi-info">
                    <div class="upi-id">UPI ID: Bittukr@fam</div>
                    <p>Scan QR code or pay using UPI ID</p>
                    <div id="topupQrcode"></div>
                </div>
                
                <div class="form-group">
                    <label>Transaction ID (After Payment)</label>
                    <input type="text" id="topupTransactionId" placeholder="Enter UPI transaction ID">
                </div>
            </div>
            
            <button class="join-button" onclick="confirmTopup()">
                Add Money
            </button>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Login / Register</h3>
                <button class="close-modal" onclick="closeModal('loginModal')">&times;</button>
            </div>
            
            <div class="form-group">
                <label>Phone Number</label>
                <input type="tel" id="loginPhone" placeholder="Enter your phone number">
            </div>
            <div class="form-group">
                <label>OTP</label>
                <input type="text" id="loginOTP" placeholder="Enter OTP">
            </div>
            
            <button class="join-button" onclick="sendOTP()" id="sendOTPBtn">
                Send OTP
            </button>
            <button class="join-button" onclick="verifyOTP()" id="verifyOTPBtn" style="display: none;">
                Verify & Login
            </button>
        </div>
    </div>

    <script type="module">
        // Firebase Configuration
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, collection, addDoc, getDocs, doc, updateDoc, onSnapshot, query, where, orderBy } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';
        import { getAuth, signInAnonymously, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';

        const firebaseConfig = {
            // Add your Firebase config here
            apiKey: "your-api-key",
            authDomain: "your-project.firebaseapp.com",
            projectId: "your-project-id",
            storageBucket: "your-project.appspot.com",
            messagingSenderId: "123456789",
            appId: "your-app-id"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);

        // Global variables
        let currentUser = null;
        let currentTournament = null;
        let tournaments = [];
        let userRegistrations = [];

        // Initialize app
        window.addEventListener('DOMContentLoaded', () => {
            initializeAuth();
            loadTournaments();
            generateReferralCode();
        });

        // Authentication
        function initializeAuth() {
            onAuthStateChanged(auth, (user) => {
                if (user) {
                    currentUser = user;
                    loadUserData();
                } else {
                    signInAnonymously(auth);
                }
            });
        }

        async function loadUserData() {
            // Load user profile data
            const userData = localStorage.getItem(`user_${currentUser.uid}`);
            if (userData) {
                const user = JSON.parse(userData);
                document.getElementById('playerName').textContent = user.name || 'Guest Player';
                document.getElementById('playerUID').textContent = user.ffUID || 'Not Set';
                document.getElementById('walletAmount').textContent = `₹${user.walletBalance || 0}`;
                document.getElementById('walletBalance').textContent = user.walletBalance || 0;
                document.getElementById('referralEarnings').textContent = user.referralEarnings || 0;
            }
        }

        // Tournament functions
        async function loadTournaments() {
            // Mock tournament data
            tournaments = [
                {
                    id: 'tour1',
                    title: 'Free Fire Championship',
                    time: '2024-01-20T18:00',
                    map: 'Bermuda',
                    prize: 1000,
                    entryFee: 50,
                    maxPlayers: 100,
                    currentPlayers: 45,
                    status: 'live',
                    roomId: '12345',
                    roomPass: 'FF2024'
                },
                {
                    id: 'tour2',
                    title: 'Evening Battle Royale',
                    time: '2024-01-20T20:00',
                    map: 'Purgatory',
                    prize: 500,
                    entryFee: 25,
                    maxPlayers: 50,
                    currentPlayers: 23,
                    status: 'upcoming',
                    roomId: '67890',
                    roomPass: 'BATTLE'
                }
            ];

            displayTournaments();
        }

        function displayTournaments(filter = 'all') {
            const homeContainer = document.getElementById('liveTournaments');
            const allContainer = document.getElementById('allTournaments');
            
            let filteredTournaments = tournaments;
            if (filter !== 'all') {
                filteredTournaments = tournaments.filter(t => t.status === filter);
            }

            const tournamentHTML = filteredTournaments.map(tournament => `
                <div class="tournament-card">
                    <div class="tournament-header">
                        <div>
                            <div class="tournament-title">${tournament.title}</div>
                            <div class="tournament-time">
                                <i class="fas fa-clock"></i> ${new Date(tournament.time).toLocaleString()}
                            </div>
                        </div>
                        <div class="tournament-prize">₹${tournament.prize}</div>
                    </div>
                    
                    <div class="tournament-details">
                        <div class="detail-item">
                            <i class="fas fa-map"></i> ${tournament.map}
                        </div>
                        <div class="detail-item">
                            <i class="fas fa-users"></i> ${tournament.currentPlayers}/${tournament.maxPlayers}
                        </div>
                        <div class="detail-item">
                            <i class="fas fa-coins"></i> Entry: ₹${tournament.entryFee}
                        </div>
                        <div class="detail-item">
                            <i class="fas fa-gamepad"></i> Room: ${tournament.roomId}
                        </div>
                    </div>
                    
                    <button class="join-button" onclick="openRegistrationModal('${tournament.id}')" 
                            ${tournament.currentPlayers >= tournament.maxPlayers ? 'disabled' : ''}>
                        ${tournament.currentPlayers >= tournament.maxPlayers ? 'Full' : 'Join Tournament'}
                    </button>
                </div>
            `).join('');

            if (homeContainer) homeContainer.innerHTML = tournamentHTML;
            if (allContainer) allContainer.innerHTML = tournamentHTML;
        }

        // Registration functions
        window.openRegistrationModal = function(tournamentId) {
            currentTournament = tournaments.find(t => t.id === tournamentId);
            if (!currentTournament) return;

            document.getElementById('entryFeeAmount').textContent = currentTournament.entryFee;
            generatePaymentQR(currentTournament.entryFee);
            document.getElementById('registrationModal').classList.add('active');
        };

        window.confirmRegistration = async function() {
            const name = document.getElementById('regPlayerName').value;
            const ffUID = document.getElementById('regPlayerUID').value;
            const phone = document.getElementById('regPlayerPhone').value;
            const transactionId = document.getElementById('transactionId').value;

            if (!name || !ffUID || !phone || !transactionId) {
                alert('Please fill all fields and complete payment');
                return;
            }

            // Save user data
            const userData = {
                name,
                ffUID,
                phone,
                walletBalance: 0,
                referralEarnings: 0,
                registrations: [currentTournament.id]
            };

            localStorage.setItem(`user_${currentUser.uid}`, JSON.stringify(userData));

            // Save registration
            const registration = {
                userId: currentUser.uid,
                tournamentId: currentTournament.id,
                transactionId,
                timestamp: Date.now(),
                status: 'pending'
            };

            localStorage.setItem(`reg_${currentUser.uid}_${currentTournament.id}`, JSON.stringify(registration));

            alert('Registration submitted! You will be notified once payment is verified.');
            closeModal('registrationModal');
            loadUserData();
        };

        // UPI QR Code generation
        function generatePaymentQR(amount) {
            const upiString = `upi://pay?pa=Bittukr@fam&pn=Tournament&am=${amount}&cu=INR&tn=Tournament Entry Fee`;
            
            const qr = qrcode(0, 'M');
            qr.addData(upiString);
            qr.make();
            
            document.getElementById('qrcode').innerHTML = qr.createImgTag(4);
        }

        function generateTopupQR(amount) {
            const upiString = `upi://pay?pa=Bittukr@fam&pn=Tournament&am=${amount}&cu=INR&tn=Wallet Topup`;
            
            const qr = qrcode(0, 'M');
            qr.addData(upiString);
            qr.make();
            
            document.getElementById('topupQrcode').innerHTML = qr.createImgTag(4);
        }

        // Referral functions
        function generateReferralCode() {
            const code = 'FF' + Math.random().toString(36).substr(2, 6).toUpperCase();
            document.getElementById('referralCode').textContent = code;
        }

        window.shareReferral = function(platform) {
            const code = document.getElementById('referralCode').textContent;
            const shareText = `🏆 Join Free Fire Tournaments and win amazing prizes! Use my referral code: ${code}\n\nDownload now: ${window.location.href}?ref=${code}`;

            switch(platform) {
                case 'whatsapp':
                    window.open(`https://wa.me/?text=${encodeURIComponent(shareText)}`);
                    break;
                case 'telegram':
                    window.open(`https://t.me/share/url?url=${encodeURIComponent(window.location.href)}&text=${encodeURIComponent(shareText)}`);
                    break;
                case 'copy':
                    navigator.clipboard.writeText(shareText).then(() => {
                        alert('Referral link copied to clipboard!');
                    });
                    break;
            }
        };

        // Wallet functions
        window.openTopupModal = function() {
            document.getElementById('topupModal').classList.add('active');
        };

        window.confirmTopup = function() {
            const amount = document.getElementById('topupAmount').value;
            const transactionId = document.getElementById('topupTransactionId').value;

            if (!amount || !transactionId || amount < 10) {
                alert('Please enter valid amount (min ₹10) and transaction ID');
                return;
            }

            generateTopupQR(amount);
            alert('Topup request submitted! Your wallet will be credited once payment is verified.');
            closeModal('topupModal');
        };

        // Modal functions
        window.showSection = function(sectionName) {
            // Hide all sections
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });

            // Remove active class from all nav tabs
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });

            // Show selected section
            document.getElementById(sectionName).classList.add('active');

            // Add active class to clicked nav tab
            event.target.classList.add('active');
        };

        window.filterTournaments = function(filter) {
            displayTournaments(filter);
            
            // Update active tab
            event.target.parentNode.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
        };

        window.closeModal = function(modalId) {
            document.getElementById(modalId).classList.remove('active');
        };

        window.showLoginModal = function() {
            document.getElementById('loginModal').classList.add('active');
        };

        window.sendOTP = function() {
            const phone = document.getElementById('loginPhone').value;
            if (!phone || phone.length < 10) {
                alert('Please enter valid phone number');
                return;
            }

            // Simulate OTP sending
            alert('OTP sent to ' + phone);
            document.getElementById('sendOTPBtn').style.display = 'none';
            document.getElementById('verifyOTPBtn').style.display = 'block';
        };

        window.verifyOTP = function() {
            const otp = document.getElementById('loginOTP').value;
            if (!otp || otp.length < 4) {
                alert('Please enter valid OTP');
                return;
            }

            alert('Login successful!');
            closeModal('loginModal');
        };

        // Close modal when clicking outside
        window.addEventListener('click', (e) => {
            if (e.target.classList.contains('modal')) {
                e.target.classList.remove('active');
            }
        });
    </script>
</body>
</html>